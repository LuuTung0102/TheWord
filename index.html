<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TheWord - T·∫°o vƒÉn b·∫£n t·ª± ƒë·ªông</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="node_modules/flatpickr/dist/flatpickr.min.css">
    
</head>
<body>
    <div class="main-container">
        <!-- Header -->
        <header class="main-header">
            <div class="header-content">
                <h1 class="app-title">
                    <span class="app-icon">üìÑ</span>
                    TheWord
                </h1>
                <p class="app-subtitle">T·∫°o vƒÉn b·∫£n t·ª± ƒë·ªông t·ª´ template</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Panel Nh·∫≠p D·ªØ Li·ªáu (Tr√°i) -->
            <div class="data-panel">
                <div class="panel-header">
                    <h2 class="panel-title">
                        <span class="panel-icon">üìù</span>
                        Nh·∫≠p d·ªØ li·ªáu
                    </h2>
                    <div class="panel-status">
                        <span class="status-indicator" id="formStatus">Ch∆∞a ch·ªçn file</span>
                    </div>
                </div>
                
                <div class="panel-content">
                    <!-- Form Area -->
                    <div class="form-container">
                        <div id="formArea" class="form-area">
                            <div class="empty-state">
                                <div class="empty-icon">üìã</div>
                                <h3>Ch∆∞a ch·ªçn file</h3>
                                <p>Vui l√≤ng ch·ªçn folder v√† file t·ª´ panel b√™n ph·∫£i ƒë·ªÉ b·∫Øt ƒë·∫ßu nh·∫≠p d·ªØ li·ªáu</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel Ch·ªçn Folder -->
            <div class="template-panel">
                <div class="panel-header">
                    <h2 class="panel-title">
                        <span class="panel-icon">üìÅ</span>
                        Ch·ªçn folder
                    </h2>
                    <div class="template-count">
                        <span id="templateCount">0</span> folder
                    </div>
                </div>
                
                <div class="panel-content">
                    <!-- Folder List -->
                    <div class="template-container">
                        <div id="templateList" class="template-list">
                            <!-- Folders will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="main-footer">
            <div class="footer-content">
                <div class="footer-info">
                    <span class="version">v4.0</span>
                    <span class="separator">‚Ä¢</span>
                    <span class="status">JSON Config System</span>
                </div>
                <div class="footer-actions">
                    <button id="exportBtn" class="export-btn" disabled>
                        <span class="btn-icon">üì§</span>
                        T·∫°o vƒÉn b·∫£n
                    </button>
                </div>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p class="loading-text">ƒêang t·∫°o vƒÉn b·∫£n...</p>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‚úÖ Th√†nh c√¥ng!</h3>
                <button class="modal-close" onclick="closeSuccessModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p>VƒÉn b·∫£n ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng!</p>
                <div class="modal-actions">
                    <button class="btn btn-primary" onclick="openOutputFolder()">M·ªü th∆∞ m·ª•c</button>
                    <button class="btn btn-secondary" onclick="closeSuccessModal()">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‚ùå L·ªói!</h3>
                <button class="modal-close" onclick="closeErrorModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p id="errorMessage">ƒê√£ x·∫£y ra l·ªói khi t·∫°o vƒÉn b·∫£n</p>
                <div class="modal-actions">
                    <button class="btn btn-secondary" onclick="closeErrorModal()">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- External Libraries -->
    <script src="node_modules/flatpickr/dist/flatpickr.min.js"></script>
    <script src="node_modules/flatpickr/dist/l10n/vn.js"></script>
    
    <!-- Load Address Data -->
    <script>
        // Load address data
        fetch('renderer/config/address.json')
            .then(response => response.json())
            .then(data => {
                window.addressData = data;
                console.log('‚úÖ Address data loaded successfully');
            })
            .catch(error => console.error('‚ùå Error loading address data:', error));
    </script>
    
    <!-- Config & Mappings -->
    <!-- üÜï NEW SYSTEM: Base constants + Config loader -->
    <script src="renderer/config/baseConstants.js"></script>
    <script src="renderer/config/configLoader.js"></script>
    <script src="renderer/handlers/genericFormHandler.js"></script>
    <script src="renderer/handlers/templateManager.js"></script>
    <script src="renderer/handlers/formHandler.js"></script>
    <script src="renderer/handlers/exportHandler.js"></script>
    <script src="renderer/core/formHelpers.js"></script>
    <script src="renderer/core/electron-imports.js"></script>

    <script src="renderer/mainApp.js"></script>

    <script>  
        function closeSuccessModal() {
            document.getElementById('successModal').style.display = 'none';
        }
        
        function closeErrorModal() {
            document.getElementById('errorModal').style.display = 'none';
        }
        
        function openOutputFolder() {
            if (window.ipcRenderer) {
                window.ipcRenderer.invoke('open-output-folder');
            }
        }
        
        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            if (window.MainApp) {
                const app = new window.MainApp();
                app.init();
            }
        });
    </script>
</body>
</html>